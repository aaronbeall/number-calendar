# Todo

I'm liking this one.

## Features
- [x] Numeric formatting
- [x] Manage multiple datasets
  - [x] Duplicate dataset
  - [ ] Favorite/pin dataset
- [x] Achievements
  - [x] Show achievements in numbers panel
  - [x] Achievement unlocked interstitial
  - [ ] Show achievements on calendar
  - [ ] Favorite/pin achievements
  - [ ] Duplicate achievement
- [x] Milestones
  - [ ] Next milestone progress bar
- [ ] Streaks
- [x] Targets
  - [ ] Valence from targets
  - [ ] Target/Milestone on calendar
- [x] Records
  - [ ] Records timeline
  - [ ] Records calendar
  - [ ] Show records on calendar
  - [ ] Records timeline playback
- [x] Notifications on new Achievements
  - [ ] Records notifications
- [ ] Onboarding
  - [ ] Example datasets
  - [ ] Create dataset from template (Weightloss, P&L, Diet, etc)
- [ ] App preferences
- [x] Data import
  - [ ] Option to skip conflicting data
  - [ ] Detect totals/derived columns and auto-deselect
  - [ ] Import dataset (with name, settings, etc)
- [x] Data export
  - [ ] Include notes
  - [ ] Export/import achievements
- [ ] Data settings
  - [x] Which is better (valence): higher, lower, etc
    - [ ] Range-bound valence: above, below, inside, outside
  - [ ] Allowed range (combines with valence for semantics, ex positive valence with positive numbers means higher is better, not positive is better)
  - [ ] Formatting style (none, currency, percent, unit)
    - [ ] Options (sign display, accounting, precision)
  - [x] Tracking: trend (weight, etc), series (P&L, etc)
  - [ ] Computed data (formula input from other sources)
  - [ ] Primary metric (default: series=total, trend=close)
  - [ ] Valence metric (default: series=total, trend=delta)
- [x] Notes (Day, Week, Month) with rich text/markdown support
  - [ ] Paste images
- [x] Week summary microchart
- [x] Day cell microdots/chart
- [x] Month cell microdots/microchart
- [x] Microcharts in numbers panel
- [x] Highlight extremes on calendar
  - [x] Show daily extremes in numbers panel for month, week, year
  - [ ] Delta extremes
- [x] Show deltas/percent change
- [x] Show primary metric averages in panel
  - [x] Daily
  - [x] Monthly
  - [ ] Weekly
- [ ] Display options
  - [ ] Heatmap mode (valence coloring based on magnitude)
  - [ ] Show/hide week summaries
  - [ ] Calculat weeks across months
  - [x] Short format numbers (10K, 1M, etc)
  - [ ] Customize displayed stats
- [ ] Full math support, ex `1+(100/23)`
  - [ ] Sub-expression parsing in numbers input, ex `1+2-(4+6)` = `[1, 2, -10]`
  - [x] Support math expressions in individual number editor
  - [ ] Support accounting format negatives `($455)` is `-455`
  - [x] Support `=` in expression parsing
- [ ] Combined datasets view for comparisons
- [x] Dashboard (for multiple data sets)
- [ ] Chart improvements
  - [x] Line chart
  - [ ] Rolling averages
  - [ ] Compare
  - [ ] Rolling start from
  - [ ] Formulas
  - [ ] Expand/fullscreen
  - [ ] Export image/pdf
- [ ] Data integrations
  - [ ] Public data sources (weather, demographics, etc)
- [ ] Additional add options
  - [x] Add by diff
  - [ ] Global quick add (with options) tailored for mobile
  - [ ] Add to rollups (week, month, year) -- how to distribute?
  - [ ] Multi-line add (re-use import code)
- [ ] Audit log (per period)
- [ ] Prev/Next in the panel
- [ ] Day breakdown/links in numbers panel (week/month/year)
- [ ] Timestamp date with number entries (requires stable re-parsing)
- [ ] View customization (weekly, order, display metric, valence, etc)
- [ ] Calendar cell tooltips (consise number panel info)
- [ ] Growth projections
- [ ] Search
- [ ] Filter by expression (re-use goal-builder)
- [ ] Custom analytics queries (expose generic `stats.ts` API)
- [ ] Add tags (on day/month/week/year)
- [ ] Add ratings (on day/month/week/year)
- [ ] Tooltips on extremes, ex "January Best"
- [ ] Highlight min/max in editable numbers badge
- [ ] Number dictionary by data type (ex "calories", lookup calories for food)
- [x] Timeline view
  - [x] Show chronology of data from most recent to least recent
  - [x] Synced side-navigator with dots and micro charts
  - [ ] Search/filter
  - [ ] Highlight achievements, records
- [ ] Analytics view
  - [ ] Date range selector
  - [ ] Graph, with custom metric plotting
  - [ ] Donut chart, with custom condition buckets
  - [ ] Histogram
  - [ ] Conditional data filtering
  - [ ] Customize view and save

## Product
- [x] Dark mode
- [x] Landing page
  - [ ] Improve landing page with screenshots, videos
- [ ] Mobile friendly
- [ ] PWA
- [ ] App store
- [ ] User social login/data sync
- [x] Support (Patreon, Buy Me A Coffee)
- [x] Feedback
- [ ] Ads?
- [x] Share
- [ ] Copyright/EULA/authorship
- [x] About
- [x] Routing (deep linking)
- [ ] Private repo/deployment
- [ ] Premium features
  - [ ] No ads
  - [ ] Number of datasets
  - [ ] AI assistance (bleh)
  - [ ] Data Syncing (via Dropbox)
  - [ ] Data export/import
  - [ ] Data integrations
  - [ ] Advanced Insights/Reporting
  - [ ] Combined dataset
  - [ ] Sharing via jsonbin

## Issues
- [x] System color mode doesn't match light/dark selection
- [x] Chart days are off by 1 (timezone offset?)
- [x] Chart is missing numeric formatting, rounding, etc
- [ ] Order of numbers in months/years is not necessarily correct (sort by date first)
- [ ] Current date is wrong when left open overnight, etc
- [x] Negative year summary has green
- [x] [High] Hide weekends is causing June 2026 days to be wrong
- [ ] Deleting a prior day numbers does not update deltas (changing normally it does)
- [x] The daily grid is hard-coded to Sun-Sat week, but weekly data keys use locale weeks which may be Mon-Sun
- [x] The Monthly view day scale is wrong, because yearExtremes is by month, not by day. Need the daily extremes for the whole year.
- [x] Normalize UUIDs
- [x] Week/Month/Year summaries need hover and selected state
- [x] Can't delete all data on a day anymore
- [x] [High] Week keys/dates are wrong, it doesn't line up with actual calendar days
- [ ] Tracking=series and deltas and percents aren't very helpful, period total is already a delta, and percents should be based on cumulative change, not change from prior delta -- will need to add cumulatives source (which itself is useless for tracking=trend)
  - [x] Add cumulative calculations to data model
  - [x] Show cumulative in tracking=series
  - [x] Expose cumulative sources in goal targets
  - [ ] Add percent change to goal builder
- [ ] Adding data to new month didn't update the monthly view show a new month summary
- [ ] Need an error boundary to catch UI errors
- [x] Need suggested goal weight, meaningful suggested values throughout
- [ ] Edit badge from numbers panel doesn't work -- replace with "Manage Achievements"
- [ ] Add more Range based achievements to goal builder
- [x] Count and average achievements
- [ ] "First Win" is kinda broken -- fix or remove
- [ ] Delete note confirmation disappears -- replace menu item with button
- [ ] Changing passed data can shift streaks/multi-count achievements, triggering their notification -- may need to use number id -- partial mitigation by obnly norifiying on current period changes
- [ ] Overlapping same category achievements (X-day streak, X-target, etc) should be stacked
- [x] Refactor to use unified data manager instead of individual data hooks
- [ ] Dashboard month trend delta (valence) is wrong, but after opening the data is right -- needs priors
- [ ] Updating goal requirements should replace title/description/label, use word boundaries (fixes current number replacement bug) and formatted matchers
- [ ] [Minor] Generated goal text has extra whitespace (renders fine)
- [ ] Maintain template with created dataset for goal builder -- add way to get to generic goal builder
- [ ] Optimization -- component memo and data calc caching
- [ ] Can't delete note (reverts to value)
- [ ] Refactor achievements to use aggregate data
- [x] Refactor to use `formatValue()` instead of `NumberFormatter`
- [ ] Timeline extremes not handled
- [ ] Editing a badge directly doesn't update the preview
- [ ] Timeline prior numbers not passed for valence coloring of first number in period (numbers panel)
- [x] URL/back button compatibility for side-panels
- [x] Format series with spaces, ie `5 +10 -20`
- [ ] `NumberText` should have tooltips (full number, high/low explanation)
- [ ] Sorting of achievements/targets/milestones should use goal values
- [ ] `=` parsng doesn't work at the beginning of expression (its redundant, but should be allowed)
- [ ] Daily micro dots need to have a limit
- [x] Priors/deltas not working correctly, null days count as 0, should be skipped over
- [ ] Perfect Week "All entries are uptrend" is not taking into account prior week delta (refactoring to aggregate data would probably fix this)
- [x] Add routing for Daily/Monthly view, maybe `?year=2025&month=06` (daily) and `?year=2025` (yearly)